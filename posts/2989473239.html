<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>自制F1C200S demo板 | 赵逸尘个人博客</title><meta name="keywords" content="全志,F1C200S,开发板,demo板"><meta name="author" content="ZhaoYichen"><meta name="copyright" content="ZhaoYichen"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="F1C200S demo板">
<meta property="og:type" content="article">
<meta property="og:title" content="自制F1C200S demo板">
<meta property="og:url" content="https://zml3589110.github.io/posts/2989473239.html">
<meta property="og:site_name" content="赵逸尘个人博客">
<meta property="og:description" content="F1C200S demo板">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg">
<meta property="article:published_time" content="2025-09-10T07:51:20.000Z">
<meta property="article:modified_time" content="2025-09-10T13:10:14.356Z">
<meta property="article:author" content="ZhaoYichen">
<meta property="article:tag" content="全志">
<meta property="article:tag" content="F1C200S">
<meta property="article:tag" content="开发板">
<meta property="article:tag" content="demo板">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><link rel="shortcut icon" href="/img/favicon_1.png"><link rel="canonical" href="https://zml3589110.github.io/posts/2989473239"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: ZhaoYichen","link":"链接: ","source":"来源: 赵逸尘个人博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '自制F1C200S demo板',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-09-10 21:10:14'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.1.1"><link rel="alternate" href="/atom.xml" title="赵逸尘个人博客" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">371</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">529</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">216</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/random.html"><i class="fa-fw fas fa-random"></i><span> Random | 随机文章</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">赵逸尘个人博客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/random.html"><i class="fa-fw fas fa-random"></i><span> Random | 随机文章</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">自制F1C200S demo板</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-09-10T07:51:20.000Z" title="发表于 2025-09-10 15:51:20">2025-09-10</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-09-10T13:10:14.356Z" title="更新于 2025-09-10 21:10:14">2025-09-10</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/">Linux</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/F1C200S/">F1C200S</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">5.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>26分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="自制F1C200S demo板"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="一、电路"><a href="#一、电路" class="headerlink" title="一、电路"></a>一、电路</h1><ul>
<li>具备FLASH下载，TF卡座，摄像头，LCD，MIC，UART等</li>
</ul>
<h2 id="一、原理图：如需PDF源文件可到资源下载。"><a href="#一、原理图：如需PDF源文件可到资源下载。" class="headerlink" title="一、原理图：如需PDF源文件可到资源下载。"></a>一、原理图：如需PDF源文件可到资源下载。</h2><p><a target="_blank" rel="noopener" href="https://oshwhub.com/AI_QY/f1c100s_1">原理图资料</a></p>
<img src="/posts/2989473239/a5e8331f42cc6551eac8403725716d39.png" class="" title="img">

<img src="/posts/2989473239/4b63a90eafd334ce1bf724bddb06b89b.png" class="" title="img">

<h2 id="二、电路：如需PDF源文件可到资源下载。"><a href="#二、电路：如需PDF源文件可到资源下载。" class="headerlink" title="二、电路：如需PDF源文件可到资源下载。"></a>二、电路：如需PDF源文件可到资源下载。</h2><img src="/posts/2989473239/1cf8dfb59ba44ccc0a63ab7bb516d98a.png" class="" title="img">

<img src="/posts/2989473239/f4dd572283b5db780ac8b8f2ed37cda7.png" class="" title="img">

<h2 id="三、实物"><a href="#三、实物" class="headerlink" title="三、实物"></a>三、实物</h2><img src="/posts/2989473239/387da10619629c5bdc3f5e86ba60fb18.png" class="" title="img">

<img src="/posts/2989473239/5868d90b3567d2b1c7df1b6916d638ae.png" class="" title="img">


<h1 id="二、Win上测试"><a href="#二、Win上测试" class="headerlink" title="二、Win上测试"></a>二、Win上测试</h1><p>此次测试的目的是尝试使用USB给NorFlash烧录镜像。</p>
<h2 id="1、安装USB驱动。使用的操作系统是win8。"><a href="#1、安装USB驱动。使用的操作系统是win8。" class="headerlink" title="1、安装USB驱动。使用的操作系统是win8。"></a>1、安装USB驱动。使用的操作系统是win8。</h2><p>在网上下载zadig-2.3.exe。接入设备后，会产生未知设备。然后进行如图操作即可。</p>
<img src="/posts/2989473239/ceb654f5e3cc3026636ea6cc177cee5c.png" class="" title="img">


<h2 id="2、使硬件进入fel模式。"><a href="#2、使硬件进入fel模式。" class="headerlink" title="2、使硬件进入fel模式。"></a>2、使硬件进入fel模式。</h2><p>在FLASH和TF卡都没有系统或为空时，插电即可进入fel模式。如果没有进入，则</p>
<p>若FLASH中有系统，需通过：短接FLASH芯片的1、4两脚，即按住开发板上boot按键，重新拔插USB或电源开关重新开关一次，即可进入fel模式。</p>
<h2 id="3、刷机"><a href="#3、刷机" class="headerlink" title="3、刷机"></a>3、刷机</h2><ul>
<li>(1)、在网上下载或我的资源包中下载，用与在windows下刷机的工具。解压到某个文件下。</li>
</ul>
<img src="/posts/2989473239/78da5325456f9e0a5952c4c5e4af00b4.png" class="" title="img">

<ul>
<li>(2)、使用win+R或其他方式打开windows命令行窗口</li>
</ul>
<p> 首先进入到刷机工具目录：cd C:\Users\Administrator\Downloads\刷机\sunxi-tools-win32_f1_flash</p>
<p>  查看信息：sunxi-fel.exe ver。我是用的是F1C100S的镜像，也可以驱动F1C200S。</p>
<p>  查看SPIFLASH信息：sunxi-fel.exe spiflash-info。我的demo板上使用的是32MFLASH，尽管镜像使用的是16MFLASH，也可以进行驱动，理论上只会无法访问后半段FLASH。</p>
<p>  烧录镜像：sunxi-fel.exe -p spiflash-write 0 sysimage-nor.img 100%。这里我将sysimge-nor.img文件拷贝到sunxi-tools-win32_f1_flash文件夹内。</p>
<img src="/posts/2989473239/56b6f108417cbc7c297081a304e74b5d.png" class="" title="img">



<h2 id="4、运行结果"><a href="#4、运行结果" class="headerlink" title="4、运行结果"></a>4、运行结果</h2><img src="/posts/2989473239/6e49e6c1f8b30c484152108a60c231b1.png" class="" title="img">


<h1 id="三、Linux上测试"><a href="#三、Linux上测试" class="headerlink" title="三、Linux上测试"></a>三、Linux上测试</h1><p>原思路即是在Linux系统下，对SPIFLASH进行烧录测试，但遇到了一些问题，导致Linux虚拟机无法识别到该设备。进而产生了上一文档的windows下烧录测试。通过在Windows下烧录测试，也验证了设备烧录、测试、各个文件均没有问题。</p>
<p>主要导致在Linux下无法测试的问题是：Vbox无法筛选USB设备，导致Linux虚拟机加载不到开发板。</p>
<p>正确过程：</p>
<h2 id="1、要使windows能正确安装设备驱动。按照上一章文档进行CSDN"><a href="#1、要使windows能正确安装设备驱动。按照上一章文档进行CSDN" class="headerlink" title="1、要使windows能正确安装设备驱动。按照上一章文档进行CSDN"></a>1、要使windows能正确安装设备驱动。按照上一章文档进行CSDN</h2><h2 id="2、在Vbox里添加增强功能。按照某度经验进行https-jingyan-baidu-com-article-22a299b5e0198a9e19376a38-html"><a href="#2、在Vbox里添加增强功能。按照某度经验进行https-jingyan-baidu-com-article-22a299b5e0198a9e19376a38-html" class="headerlink" title="2、在Vbox里添加增强功能。按照某度经验进行https://jingyan.baidu.com/article/22a299b5e0198a9e19376a38.html"></a>2、在Vbox里添加增强功能。按照某度经验进行<a target="_blank" rel="noopener" href="https://jingyan.baidu.com/article/22a299b5e0198a9e19376a38.html">https://jingyan.baidu.com/article/22a299b5e0198a9e19376a38.html</a></h2><h2 id="3、增强功能安装后，添加筛选器。我这里使用的手动添加。"><a href="#3、增强功能安装后，添加筛选器。我这里使用的手动添加。" class="headerlink" title="3、增强功能安装后，添加筛选器。我这里使用的手动添加。"></a>3、增强功能安装后，添加筛选器。我这里使用的手动添加。</h2><img src="/posts/2989473239/90387ee3726d69a3b29bbe5199f51246.png" class="" title="img">

<p>筛选参数按照window系统中驱动信息进行填写。</p>
<img src="/posts/2989473239/c9aa769a65e154ab6c169874bb7b1a87.png" class="" title="img"><img src="/posts/2989473239/3b9ea6465b78d60106599a3b835fd03d.png" class="" title="img">

<h2 id="4、打开Linux虚拟机后，进入到命令行模式。"><a href="#4、打开Linux虚拟机后，进入到命令行模式。" class="headerlink" title="4、打开Linux虚拟机后，进入到命令行模式。"></a>4、打开Linux虚拟机后，进入到命令行模式。</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/Icenowy/sunxi-tools.git -b f1c100s-spiflash</span><br><span class="line">sudo apt install libz libusb-1.0-0-dev</span><br><span class="line">make &amp;&amp; sudo make install</span><br><span class="line">sudo sunxi-fel ver</span><br><span class="line">输出信息：</span><br><span class="line"><span class="string">&quot;AWUSBFEX soc=00001663(F1C100s) 00000001 ver=0001 44 08 scratchpad=00007e00 00000000 00000000&quot;</span></span><br><span class="line">sudo sunxi-fel -l</span><br><span class="line">sudo sunxi-fel -p spiflash-write 0 u-boot-sunxi-with-spl.bin</span><br></pre></td></tr></table></figure>

<p>  查看支持的芯片：sudo sunxi-fel -l。</p>
<p>  查看开发板信息：sudo sunxi-fel ver。</p>
<p>  查看SPIFLASH信息：sudo sunxi-fel spiflash-info。</p>
<p>  烧录镜像到SPIFLASH：sudo sunxi-fel -p spiflash-write 0 Nano_flash_800480.bin 100%。这里使用的是荔枝派的Nano的FLASH。</p>
<img src="/posts/2989473239/f5874d781e692131970602d2112159f9.png" class="" title="img">

<img src="/posts/2989473239/703b2a3d086d8ecdbbaf9ccd795f5760.png" class="" title="img">

<h2 id="5、显示正常，使用串口调试助手能看到有效信息。表示操作无误。"><a href="#5、显示正常，使用串口调试助手能看到有效信息。表示操作无误。" class="headerlink" title="5、显示正常，使用串口调试助手能看到有效信息。表示操作无误。"></a>5、显示正常，使用串口调试助手能看到有效信息。表示操作无误。</h2><img src="/posts/2989473239/3748a8399b66fad40291531b2f1c688b.png" class="" title="img">



<h1 id="四、TF卡启动"><a href="#四、TF卡启动" class="headerlink" title="四、TF卡启动"></a>四、TF卡启动</h1><p>思来想去，发现使用SIPFLASH也不是百分百完美，也终于明白为何最小demo板要首推TF卡启动了。</p>
<p>主要是现在想学Linux驱动，但使用SPIFLASH就需要用uboot和kernel两个同时打包为一个镜像，这样编译和打包都会影响速度。使用TF卡，就可以把三个板块分开，单独操作而互不干扰。</p>
<p>这里操作步骤需要摸清楚：1、uboot获取，编译，烧录。2、kernel获取，编译，烧录。3、文件系统搭建。</p>
<p>获取uboot：git clone <a target="_blank" rel="noopener" href="https://github.com/Lichee-Pi/u-boot">https://github.com/Lichee-Pi/u-boot</a> -b nano-v2018.01&amp;&amp;cd u-boot</p>
<p>获取时出现的问题：从网上别人博客里是：git clone <a target="_blank" rel="noopener" href="https://github.com/Lichee-Pi/u-boot.git">https://github.com/Lichee-Pi/u-boot.git</a> -b nano-v2018.01&amp;&amp;cd u-boot，发现获取不到。</p>
<p>解决方法：去掉.git后获取正常。</p>
<p>编译uboot：make ARCH&#x3D;arm CROSS_COMPILE&#x3D;arm-linux-gnueabi- licheepi_nano_defconfig</p>
<p>make ARCH&#x3D;arm menuconfig</p>
<p>make ARCH&#x3D;arm CROSS_COMPILE&#x3D;arm-linux-gnueabi- -j12</p>
<p>编译时出现的问题：make: arm-linux-gnueabi-gcc: Command not found。</p>
<p>解决方法：sudo apt install gcc-arm-linux-gnueabi。</p>
<p>编译时出现的问题：unable to execute ‘swig’: No such file or directory。</p>
<p>解决方法：sudo apt install swig。</p>
<p>编译时出现的问题：scripts&#x2F;dtc&#x2F;pylibfdt&#x2F;libfdt_wrap.c:149:11: fatal error: Python.h: 没有那个文件或目录。</p>
<p>解决方法：1、查看版本：python -V，2、获取对应文件：sudo apt install python2.7-dev。（这里的2.7要修改为和查看的版本相匹配）</p>
<p>烧录uboot：sudo dd if&#x3D;u-boot-tf.bin of&#x3D;&#x2F;dev&#x2F;sdb bs&#x3D;1024 seek&#x3D;8</p>
<p>sudo cp suniv-f1c100s-licheepi-nano.dtb &#x2F;media&#x2F;one&#x2F;UBOOT&#x2F;</p>
<p>拷贝镜像文件：sudo cp tf-zImage &#x2F;media&#x2F;one&#x2F;UBOOT&#x2F;</p>
<p>拷贝文件系统：sudo tar -xvf rootfs-tf.tar.gz -C &#x2F;media&#x2F;one&#x2F;rootfs&#x2F;</p>
<p>需要将TF卡分成两个区：uboot fat16 64M 和 rootfs ext4 (TF卡剩余所有空间）。</p>
<p>查看磁盘：sudo fdisk -l  和 查看挂载：df|grep sd</p>
<p>以上烧录使用的是Lichee-pi-nano的标准文件，并未使用我编译的文件，可以正常运行，输出启动参数。</p>
<p>经过测试，当SPIFLASH和TF卡里都有系统时，优先运行TF卡中系统。</p>
<p>在2021年9月16日，终于指导了uboot和Linux等的关联和基本操作了。虽然前面都在串口调试助手上显示了启动信息，但仔细查看，始终没看到运行kernel。今天终于搞明白了，这三大板块放到TF卡中应该正确操作的流程了。</p>
<p>开机后，串口调试助手上会输出信息，但仅仅是输出uboot的信息，会停留在uboot的命令行。需要在这里使用命令行，配置kernel引导参数，从而执行Linux。</p>
<p>也可以按照<a target="_blank" rel="noopener" href="http://nano.lichee.pro/build_sys/bootargs.html">uboot传递参数 — 荔枝派Nano 全流程指南 documentation</a> 生成一个boot.scr文件，复制到TF卡的第一分区，就能自动运行LINUX，无需再再串口调试助手中输入这些指令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br></pre></td><td class="code"><pre><span class="line">以下是串口调试助手完整输出信息，红色部分则是要人为发送的启动信息。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[2021-09-16 12:03:07.143] RX：</span><br><span class="line">U-Boot SPL 2018.01-05679-g013ca457fd (Sep 03 2021 - 09:23:32)</span><br><span class="line">DRAM: 64 MiB</span><br><span class="line">Trying to boot from MMC1</span><br><span class="line"></span><br><span class="line">[2021-09-16 12:03:07.311] RX：</span><br><span class="line"></span><br><span class="line">U-Boot 2018.01-05679-g013ca457fd (Sep 03 2021 - 09:23:32 +0800) Allwinner Technology</span><br><span class="line"></span><br><span class="line">DRAM:  64 MiB</span><br><span class="line"></span><br><span class="line">[2021-09-16 12:03:07.842] RX：MMC:   SUNXI SD/MMC: 0</span><br><span class="line"></span><br><span class="line">[2021-09-16 12:03:07.918] RX：*** Warning - bad CRC, using default environment</span><br><span class="line"></span><br><span class="line">In:    serial@1c25000</span><br><span class="line">Out:   serial@1c25000</span><br><span class="line">Err:   serial@1c25000</span><br><span class="line">Net:   No ethernet found.</span><br><span class="line">starting USB...</span><br><span class="line">No controllers found</span><br><span class="line">Hit any key to stop autoboot:  2 </span><br><span class="line">[2021-09-16 12:03:08.942] RX： 1 </span><br><span class="line">[2021-09-16 12:03:09.943] RX： 0 </span><br><span class="line"></span><br><span class="line">[2021-09-16 12:03:10.006] RX：switch to partitions <span class="comment">#0, OK</span></span><br><span class="line">mmc0 is current device</span><br><span class="line"></span><br><span class="line">[2021-09-16 12:03:10.556] RX：Scanning mmc 0:1...</span><br><span class="line"></span><br><span class="line">[2021-09-16 12:03:10.705] RX：reading /suniv-f1c100s-licheepi-nano.dtb</span><br><span class="line">7583 bytes <span class="built_in">read</span> <span class="keyword">in</span> 21 ms (352.5 KiB/s)</span><br><span class="line"></span><br><span class="line">[2021-09-16 12:03:10.773] RX：starting USB...</span><br><span class="line">No controllers found</span><br><span class="line">USB is stopped. Please issue <span class="string">&#x27;usb start&#x27;</span> first.</span><br><span class="line">starting USB...</span><br><span class="line">No controllers found</span><br><span class="line">No ethernet found.</span><br><span class="line">missing environment variable: pxeuuid</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: pxelinux.cfg/00000000</span><br><span class="line">No ethernet found.</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: pxelinux.cfg/0000000</span><br><span class="line">No ethernet found.</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: pxelinux.cfg/000000</span><br><span class="line">No ethernet found.</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: pxelinux.cfg/00000</span><br><span class="line">No ethernet found.</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: pxelinux.cfg/0000</span><br><span class="line">No ethernet found.</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: pxelinux.cfg/000</span><br><span class="line">No ethernet found.</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: pxelinux.cfg/00</span><br><span class="line">No ethernet found.</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: pxelinux.cfg/0</span><br><span class="line">No ethernet found.</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: pxelinux.cfg/default-arm-sunxi</span><br><span class="line">No ethernet found.</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: pxelinux.cfg/default-arm</span><br><span class="line">No ethernet found.</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: pxelinux.cfg/default</span><br><span class="line">No ethernet found.</span><br><span class="line">Config file not found</span><br><span class="line">starting USB...</span><br><span class="line">No controllers found</span><br><span class="line">No ethernet found.</span><br><span class="line">No ethernet found.</span><br><span class="line">=&gt; 人为发送的启动信息</span><br><span class="line">[2021-09-16 12:03:12.310] TX：setenv bootargs console=tty0 console=ttyS0,115200 panic=5 rootwait root=/dev/mmcblk0p2 rw</span><br><span class="line"></span><br><span class="line">[2021-09-16 12:03:12.313] RX：setenv bootargs console=tty0 console=ttyS0,115200 panic=5 rootwait root=/dev/mmcblk0p2 rw</span><br><span class="line">=&gt; </span><br><span class="line">=&gt; 人为发送的启动信息</span><br><span class="line">[2021-09-16 12:03:13.539] TX：load mmc 0:1 0x80C00000 suniv-f1c100s-licheepi-nano.dtb</span><br><span class="line"></span><br><span class="line">[2021-09-16 12:03:13.544] RX：load mmc 0:1 0x80C00000 suniv-f1c100s-licheepi-nano.dtb</span><br><span class="line">reading suniv-f1c100s-licheepi-nano.dtb</span><br><span class="line">7583 bytes <span class="built_in">read</span> <span class="keyword">in</span> 21 ms (352.5 KiB/s)</span><br><span class="line">=&gt; </span><br><span class="line">=&gt; 人为发送的启动信息</span><br><span class="line">[2021-09-16 12:03:15.421] TX：load mmc 0:1 0x80008000 zImage</span><br><span class="line"></span><br><span class="line">[2021-09-16 12:03:15.424] RX：load mmc 0:1 0x80008000 zImage</span><br><span class="line">reading zImage</span><br><span class="line"></span><br><span class="line">[2021-09-16 12:03:15.635] RX：3838016 bytes <span class="built_in">read</span> <span class="keyword">in</span> 194 ms (18.9 MiB/s)</span><br><span class="line">=&gt; </span><br><span class="line">=&gt; 人为发送的启动信息</span><br><span class="line">[2021-09-16 12:03:17.540] TX：bootz 0x80008000 - 0x80C00000</span><br><span class="line"></span><br><span class="line">[2021-09-16 12:03:17.543] RX：bootz 0x80008000 - 0x80C00000</span><br><span class="line"><span class="comment">## Flattened Device Tree blob at 80c00000</span></span><br><span class="line">   Booting using the fdt blob at 0x80c00000</span><br><span class="line">   Loading Device Tree to 816fb000, end 816ffd9e ... OK</span><br><span class="line"></span><br><span class="line">Starting kernel ...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[2021-09-16 12:03:18.737] RX：[    0.000000] Booting Linux on physical CPU 0x0</span><br><span class="line">[    0.000000] Linux version 4.15.0-rc8-licheepi-nano+ (one@one-VirtualBox) (gcc version 7.5.0 (Ubuntu/Linaro 7.5.0-3ubuntu1~18.04)) <span class="comment">#1 Tue Sep 14 17:09:09 CST 2021</span></span><br><span class="line">[    0.000000] CPU: ARM926EJ-S [41069265] revision 5 (ARMv5TEJ), cr=0005317f</span><br><span class="line">[    0.000000] CPU: VIVT data cache, VIVT instruction cache</span><br><span class="line">[    0.000000] OF: fdt: Machine model: Lichee Pi Nano</span><br><span class="line">[    0.000000] Memory policy: Data cache writeback</span><br><span class="line">[    0.000000] random: fast init <span class="keyword">done</span></span><br><span class="line">[    0.000000] Built 1 zonelists, mobility grouping on.  Total pages: 16256</span><br><span class="line">[    0.000000] Kernel <span class="built_in">command</span> line: console=tty0 console=ttyS0,115200 panic=5 rootwait root=/dev/mmcblk0p2 rw</span><br><span class="line">[    0.000000] Dentry cache <span class="built_in">hash</span> table entries: 8192 (order: 3, 32768 bytes)</span><br><span class="line">[    0.000000] Inode-cache <span class="built_in">hash</span> table entries: 4096 (order: 2, 16384 bytes)</span><br><span class="line">[    0.000000] Memory: 55172K/65536K available (6144K kernel code, 236K rwdata, 1388K rodata, 1024K init, 244K bss, 10364K reserved, 0K cma-reserved, 0K highmem)</span><br><span class="line">[    0.000000] Virtual kernel memory layout:</span><br><span class="line">[    0.000000]     vector  : 0xffff0000 - 0xffff1000   (   4 kB)</span><br><span class="line">[    0.000000]     fixmap  : 0xffc00000 - 0xfff00000   (3072 kB)</span><br><span class="line">[    0.000000]     vmalloc : 0xc4800000 - 0xff800000   ( 944 MB)</span><br><span class="line">[    0.000000]     lowmem  : 0xc0000000 - 0xc4000000   (  64 MB)</span><br><span class="line">[    0.000000]     pkmap   : 0xbfe00000 - 0xc0000000   (   2 MB)</span><br><span class="line">[    0.000000]     modules : 0xbf000000 - 0xbfe00000   (  14 MB)</span><br><span class="line">[    0.000000]       .text : 0x(ptrval) - 0x(ptrval)   (7136 kB)</span><br><span class="line">[    0.000000]       .init : 0x(ptrval) - 0x(ptrval)   (1024 kB)</span><br><span class="line">[    0.000000]       .data : 0x(ptrval) - 0x(ptrval)   ( 237 kB)</span><br><span class="line">[    0.000000]        .bss : 0x(ptrval) - 0x(ptrval)   ( 245 kB)</span><br><span class="line">[    0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1</span><br><span class="line">[    0.000000] NR_IRQS: 16, nr_irqs: 16, preallocated irqs: 16</span><br><span class="line">[    0.000044] sched_clock: 32 bits at 24MHz, resolution 41ns, wraps every 89478484971ns</span><br><span class="line">[    0.000107] clocksource: timer: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 79635851949 ns</span><br><span class="line">[    0.000634] Console: colour dummy device 80x30</span><br><span class="line">[    0.001547] console [tty0] enabled</span><br><span class="line">[    0.001649] Calibrating delay loop... 203.16 BogoMIPS (lpj=1015808)</span><br><span class="line">[    0.070270] pid_max: default: 32768 minimum: 301</span><br><span class="line">[    0.070605] Mount-cache <span class="built_in">hash</span> table entries: 1024 (order: 0, 4096 bytes)</span><br><span class="line">[    0.070691] Mountpoint-cache <span class="built_in">hash</span> table entries: 1024 (order: 0, 4096 bytes)</span><br><span class="line">[    0.072128] CPU: Testing write buffer coherency: ok</span><br><span class="line">[    0.073790] Setting up static identity map <span class="keyword">for</span> 0x80100000 - 0x80100058</span><br><span class="line">[    0.076353] devtmpfs: initialized</span><br><span class="line">[    0.082594] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns</span><br><span class="line">[    0.082753] futex <span class="built_in">hash</span> table entries: 256 (order: -1, 3072 bytes)</span><br><span class="line">[    0.083054] pinctrl core: initialized pinctrl subsystem</span><br><span class="line">[    0.085012] NET: Registered protocol family 16</span><br><span class="line">[    0.086414] DMA: preallocated 256 KiB pool <span class="keyword">for</span> atomic coherent allocations</span><br><span class="line">[    0.088228] cpuidle: using governor menu</span><br><span class="line">[    0.112653] SCSI subsystem initialized</span><br><span class="line">[    0.113054] usbcore: registered new interface driver usbfs</span><br><span class="line">[    0.113256] usbcore: registered new interface driver hub</span><br><span class="line">[    0.113505] usbcore: registered new device driver usb</span><br><span class="line">[    0.113994] pps_core: LinuxPPS API ver. 1 registered</span><br><span class="line">[    0.114073] pps_core: Software ver. 5.3.6 - Copyright 2005-2007 Rodolfo Giometti &lt;giometti@linux.it&gt;</span><br><span class="line">[    0.114196] PTP clock support registered</span><br><span class="line">[    0.114675] Advanced Linux Sound Architecture Driver Initialized.</span><br><span class="line">[    0.116219] clocksource: Switched to clocksource timer</span><br><span class="line">[    0.141314] NET: Registered protocol family 2</span><br><span class="line">[    0.142762] TCP established <span class="built_in">hash</span> table entries: 1024 (order: 0, 4096 bytes)</span><br><span class="line">[    0.142912] TCP <span class="built_in">bind</span> <span class="built_in">hash</span> table entries: 1024 (order: 0, 4096 bytes)</span><br><span class="line">[    0.143002] TCP: Hash tables configured (established 1024 <span class="built_in">bind</span> 1024)</span><br><span class="line">[    0.143302] UDP <span class="built_in">hash</span> table entries: 256 (order: 0, 4096 bytes)</span><br><span class="line">[    0.143408] UDP-Lite <span class="built_in">hash</span> table entries: 256 (order: 0, 4096 bytes)</span><br><span class="line">[    0.143903] NET: Registered protocol family 1</span><br><span class="line">[    0.145154] RPC: Registered named UNIX socket transport module.</span><br><span class="line">[    0.145261] RPC: Registered udp transport module.</span><br><span class="line">[    0.145309] RPC: Registered tcp transport module.</span><br><span class="line">[    0.145352] RPC: Registered tcp NFSv4.1 backchannel transport module.</span><br><span class="line">[    0.147636] NetWinder Floating Point Emulator V0.97 (double precision)</span><br><span class="line">[    0.149450] Initialise system trusted keyrings</span><br><span class="line">[    0.150062] workingset: timestamp_bits=30 max_order=14 bucket_order=0</span><br><span class="line">[    0.167180] NFS: Registering the id_resolver key <span class="built_in">type</span></span><br><span class="line">[    0.167334] Key <span class="built_in">type</span> id_resolver registered</span><br><span class="line">[    0.167393] Key <span class="built_in">type</span> id_legacy registered</span><br><span class="line">[    0.180354] Key <span class="built_in">type</span> asymmetric registered</span><br><span class="line">[    0.180460] Asymmetric key parser <span class="string">&#x27;x509&#x27;</span> registered</span><br><span class="line">[    0.180692] Block layer SCSI generic (bsg) driver version 0.4 loaded (major 251)</span><br><span class="line">[    0.180785] io scheduler noop registered</span><br><span class="line">[    0.180833] io scheduler deadline registered</span><br><span class="line">[    0.181596] io scheduler cfq registered (default)</span><br><span class="line">[    0.181690] io scheduler mq-deadline registered</span><br><span class="line">[    0.181743] io scheduler kyber registered</span><br><span class="line">[    0.182841] sun4i-usb-phy 1c13400.phy: Couldn<span class="string">&#x27;t request ID GPIO</span></span><br><span class="line"><span class="string">[    0.192424] suniv-pinctrl 1c20800.pinctrl: initialized sunXi PIO driver</span></span><br><span class="line"><span class="string">[    0.354497] Serial: 8250/16550 driver, 8 ports, IRQ sharing disabled</span></span><br><span class="line"><span class="string">[    0.361118] console [ttyS0] disabled</span></span><br><span class="line"><span class="string">[    0.381429] 1c25000.serial: ttyS0 at MMIO 0x1c25000 (irq = 23, base_baud = 6250000) is a 16550A</span></span><br><span class="line"><span class="string">[    0.852908] console [ttyS0] enabled</span></span><br><span class="line"><span class="string">[    0.863244] panel-simple panel: panel supply power not found, using dummy regulator</span></span><br><span class="line"><span class="string">[    0.872677] SCSI Media Changer driver v0.25 </span></span><br><span class="line"><span class="string">[    0.880398] m25p80 spi0.0: found w25q256, expected w25q128</span></span><br><span class="line"><span class="string">[    0.886477] m25p80 spi0.0: w25q256 (32768 Kbytes)</span></span><br><span class="line"><span class="string">[    0.893635] ehci_hcd: USB 2.0 &#x27;</span>Enhanced<span class="string">&#x27; Host Controller (EHCI) Driver</span></span><br><span class="line"><span class="string">[    0.900355] ehci-platform: EHCI generic platform driver</span></span><br><span class="line"><span class="string">[    0.905917] ohci_hcd: USB 1.1 &#x27;</span>Open<span class="string">&#x27; Host Controller (OHCI) Driver</span></span><br><span class="line"><span class="string">[    0.912272] ohci-platform: OHCI generic platform driver</span></span><br><span class="line"><span class="string">[    0.918003] usbcore: registered new interface driver usb-storage</span></span><br><span class="line"><span class="string">[    0.924980] udc-core: couldn&#x27;</span>t find an available UDC - added [g_cdc] to list of pending drivers</span><br><span class="line">[    0.934113] i2c /dev entries driver</span><br><span class="line"></span><br><span class="line">[2021-09-16 12:03:19.352] RX：[    0.996353] sunxi-mmc 1c0f000.mmc: base:0x0db647ea irq:19</span><br><span class="line">[    1.003836] usbcore: registered new interface driver usbhid</span><br><span class="line">[    1.009596] usbhid: USB HID core driver</span><br><span class="line">[    1.031128] NET: Registered protocol family 17</span><br><span class="line">[    1.035884] Key <span class="built_in">type</span> dns_resolver registered</span><br><span class="line">[    1.042602] Loading compiled-in X.509 certificates</span><br><span class="line">[    1.058564] sun4i-drm display-engine: bound 1e60000.display-backend (ops 0xc0739498)</span><br><span class="line">[    1.067512] sun4i-drm display-engine: bound 1c0c000.lcd-controller (ops 0xc073877c)</span><br><span class="line">[    1.075259] [drm] Supports vblank timestamp caching Rev 2 (21.10.2013).</span><br><span class="line">[    1.082015] [drm] No driver support <span class="keyword">for</span> vblank timestamp query.</span><br><span class="line"></span><br><span class="line">[2021-09-16 12:03:19.511] RX：[    1.138455] Console: switching to colour frame buffer device 60x34</span><br><span class="line">[    1.140705] mmc0: host does not support reading read-only switch, assuming write-enable</span><br><span class="line">[    1.142989] mmc0: new high speed SDHC card at address 59b4</span><br><span class="line">[    1.144075] mmcblk0: mmc0:59b4 SD    15.0 GiB </span><br><span class="line">[    1.146386]  mmcblk0: p1 p2</span><br><span class="line">[    1.208313] sun4i-drm display-engine: fb0:  frame buffer device</span><br><span class="line">[    1.227575] [drm] Initialized sun4i-drm 1.0.0 20150629 <span class="keyword">for</span> display-engine on minor 0</span><br><span class="line">[    1.249110] usb_phy_generic usb_phy_generic.0.auto: usb_phy_generic.0.auto supply vcc not found, using dummy regulator</span><br><span class="line">[    1.279822] musb-hdrc musb-hdrc.1.auto: MUSB HDRC host driver</span><br><span class="line">[    1.298514] musb-hdrc musb-hdrc.1.auto: new USB bus registered, assigned bus number 1</span><br><span class="line">[    1.321574] hub 1-0:1.0: USB hub found</span><br><span class="line">[    1.332130] hub 1-0:1.0: 1 port detected</span><br><span class="line">[    1.344233] using random self ethernet address</span><br><span class="line">[    1.355304] using random host ethernet address</span><br><span class="line">[    1.367912] usb0: HOST MAC 96:a7:62:ad:40:54</span><br><span class="line">[    1.378730] usb0: MAC 32:68:5e:ee:7c:4e</span><br><span class="line">[    1.389004] g_cdc gadget: CDC Composite Gadget, version: King Kamehameha Day 2008</span><br><span class="line">[    1.408933] g_cdc gadget: g_cdc ready</span><br><span class="line">[    1.419690] cfg80211: Loading compiled-in X.509 certificates <span class="keyword">for</span> regulatory database</span><br><span class="line">[    1.449709] cfg80211: Loaded X.509 cert <span class="string">&#x27;sforshee: 00b28ddf47aef9cea7&#x27;</span></span><br><span class="line">[    1.468828] ALSA device list:</span><br><span class="line">[    1.478044]   <span class="comment">#0: Loopback 1</span></span><br><span class="line">[    1.487901] platform regulatory.0: Direct firmware load <span class="keyword">for</span> regulatory.db failed with error -2</span><br><span class="line">[    1.508671] cfg80211: failed to load regulatory.db</span><br><span class="line">[    1.521906] EXT4-fs (mmcblk0p2): couldn<span class="string">&#x27;t mount as ext3 due to feature incompatibilities</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[2021-09-16 12:03:20.009] RX：[    1.653047] EXT4-fs (mmcblk0p2): recovery complete</span></span><br><span class="line"><span class="string">[    1.669691] EXT4-fs (mmcblk0p2): mounted filesystem with ordered data mode. Opts: (null)</span></span><br><span class="line"><span class="string">[    1.690011] VFS: Mounted root (ext4 filesystem) on device 179:2.</span></span><br><span class="line"><span class="string">[    1.710548] devtmpfs: mounted</span></span><br><span class="line"><span class="string">[    1.724192] Freeing unused kernel memory: 1024K</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[2021-09-16 12:03:20.248] RX：[    1.892543] EXT4-fs (mmcblk0p2): re-mounted. Opts: data=ordered</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[2021-09-16 12:03:20.361] RX：Starting logging: </span></span><br><span class="line"><span class="string">[2021-09-16 12:03:20.403] RX：OK</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[2021-09-16 12:03:20.483] RX：Initializing random number generator... </span></span><br><span class="line"><span class="string">[2021-09-16 12:03:20.591] RX：done.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[2021-09-16 12:03:20.710] RX：</span></span><br><span class="line"><span class="string">Welcome to Lichee Pi</span></span><br><span class="line"><span class="string">Lichee login: </span></span><br><span class="line"><span class="string">[2021-09-16 12:03:26.235] TX：root</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[2021-09-16 12:03:26.239] RX：root</span></span><br><span class="line"><span class="string">Password: </span></span><br><span class="line"><span class="string">[2021-09-16 12:03:27.220] TX：licheepi</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[2021-09-16 12:03:27.224] RX：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[2021-09-16 12:03:27.283] RX：# </span></span><br><span class="line"><span class="string"># </span></span><br><span class="line"><span class="string">[2021-09-16 12:03:29.020] TX：poweroff</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[2021-09-16 12:03:29.025] RX：poweroff</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[2021-09-16 12:03:29.148] RX：# </span></span><br><span class="line"><span class="string"># </span></span><br><span class="line"><span class="string">[2021-09-16 12:03:29.212] RX：Saving random seed... done.</span></span><br><span class="line"><span class="string">Stopping logging: </span></span><br><span class="line"><span class="string">[2021-09-16 12:03:29.275] RX：OK</span></span><br><span class="line"><span class="string">umount: devtmpfs busy - remounted read-only</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[2021-09-16 12:03:29.403] RX：[   11.047017] EXT4-fs (mmcblk0p2): re-mounted. Opts: (null)</span></span><br><span class="line"><span class="string">The system is going down NOW!</span></span><br><span class="line"><span class="string">Sent SIGTERM to all processes</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[2021-09-16 12:03:30.425] RX： Sent SIGKILL to all processes</span></span><br><span class="line"><span class="string">Requesting system poweroff</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[2021-09-16 12:03:31.428] RX：[   13.072847] reboot: System halted</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>



<h1 id="五、Linux初学1"><a href="#五、Linux初学1" class="headerlink" title="五、Linux初学1"></a>五、Linux初学1</h1><p>1、获取源码；2、编译源码；3、烧录可执行文件；4、显示效果</p>
<p>一直在了解源码，但怎么都学不会，直到现在也没能在屏幕上输出个hello world。现在想要在自己的板上，一步一步学习使用。第一件事就是把别人做好的源码进行编译输出个东西，然后再去修改。</p>
<h2 id="一、u-boot"><a href="#一、u-boot" class="headerlink" title="一、u-boot"></a>一、u-boot</h2><p>1、获取源码<br>git clone <a target="_blank" rel="noopener" href="https://github.com/Lichee-Pi/u-boot.git">https://github.com/Lichee-Pi/u-boot.git</a> -b nano-v2018.01</p>
<p>2、生成配置文件</p>
<ul>
<li><p>如果需要生成在sdram里启动的uboot</p>
</li>
<li><p>make ARCH&#x3D;arm licheepi_nano_defconfig</p>
</li>
<li><p>如果需要生成在spiflash里启动的uboot</p>
</li>
<li><p>make ARCH&#x3D;arm licheepi_nano_spiflash_defconfig</p>
</li>
</ul>
<p>3、编译</p>
<ul>
<li>make V&#x3D;1 ARCH&#x3D;arm CROSS_COMPILE&#x3D;arm-linux-gnueabihf- -j12</li>
</ul>
<h2 id="二、Linux"><a href="#二、Linux" class="headerlink" title="二、Linux"></a>二、Linux</h2><p>1、获取源码：</p>
<p>git clone –depth&#x3D;1 -b f1c100s-480272lcd-test <a target="_blank" rel="noopener" href="https://github.com/Icenowy/linux.git">https://github.com/Icenowy/linux.git</a></p>
<p>不知道为何我克隆时，上面.git后缀必须要去掉。</p>
<p>wget <a target="_blank" rel="noopener" href="http://dl.sipeed.com/LICHEE/Nano/SDK/config">http://dl.sipeed.com/LICHEE/Nano/SDK/config</a></p>
<p>mv config .config</p>
<p>2、编译源码：</p>
<p>make ARCH&#x3D;arm menuconfig</p>
<p>make ARCH&#x3D;arm CROSS_COMPILE&#x3D;arm-linux-gnueabi- -j12</p>
<h2 id="三、烧录可执行文件："><a href="#三、烧录可执行文件：" class="headerlink" title="三、烧录可执行文件："></a>三、烧录可执行文件：</h2><p>编译完成后将linux&#x2F;arch&#x2F;arm&#x2F;boot下的“zImage”文件和linux&#x2F;arch&#x2F;arm&#x2F;boot&#x2F;dts下的“suniv-f1c100s-licheepi-nano.dtb”文件拷贝到TF卡第一分区。</p>
<p>在第一分区中放入boot.scr文件。其他按照前面文章进行即可运行。</p>
<h2 id="四、显示效果："><a href="#四、显示效果：" class="headerlink" title="四、显示效果："></a>四、显示效果：</h2><p>串口调试助手会输出运行信息，界面也会显示信息。在串口调试助手上可以使用Linux命令进行基本操作。</p>
<p>使用的是800x480的屏，但Linux配置的是480x272的显示，因此显示不是全屏。这也变成了后期学习的一点。</p>
<img src="/posts/2989473239/30e2c79f8392e1c8392cade7396bee20.png" class="" title="img">


<h1 id="六、裸机寄存器点灯"><a href="#六、裸机寄存器点灯" class="headerlink" title="六、裸机寄存器点灯"></a>六、裸机寄存器点灯</h1><p>按照《嵌入式Linux应用开发 完全手册》，了解寄存器的操作，编译流程，硬件执行流程。</p>
<h2 id="1、修改LED源码"><a href="#1、修改LED源码" class="headerlink" title="1、修改LED源码"></a>1、修改LED源码</h2><p>按照书上编辑修改LED源代码：其中寄存器地址与IO偏移按照芯片手册和电路实际IO进行修改。我的电路使用PA0、PA1作为按键输入，PA2、PA3作为LED输出。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// File led_on_c.c</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PA_CFG0		(*(volatile unsigned long *)(0x01C20800+(0*0x24+0x00)))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PA_DAT		(*(volatile unsigned long *)(0x01C20800+(0*0x24+0x10)))</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BIT0	0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BIT1	1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BIT2	2</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BIT3	3</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">delay</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	PA_CFG0 &amp;= ~(<span class="number">0x7</span> &lt;&lt; (<span class="number">4</span> * BIT0));<span class="comment">//PA0 in</span></span><br><span class="line">	PA_CFG0 &amp;= ~(<span class="number">0x7</span> &lt;&lt; (<span class="number">4</span> * BIT1));<span class="comment">//PA1 in</span></span><br><span class="line"> </span><br><span class="line">	PA_CFG0 &amp;= ~(<span class="number">0x7</span> &lt;&lt; (<span class="number">4</span> * BIT2));<span class="comment">//PA2 clear</span></span><br><span class="line">	PA_CFG0 &amp;= ~(<span class="number">0x7</span> &lt;&lt; (<span class="number">4</span> * BIT3));<span class="comment">//PA3 clear</span></span><br><span class="line"> </span><br><span class="line">	PA_CFG0 |= <span class="number">0x1</span> &lt;&lt; (<span class="number">4</span> * BIT2);<span class="comment">//PA2 out</span></span><br><span class="line">	PA_CFG0 |= <span class="number">0x1</span> &lt;&lt; (<span class="number">4</span> * BIT3);<span class="comment">//PA3 out</span></span><br><span class="line"> </span><br><span class="line">	PA_DAT |= <span class="number">0x1</span> &lt;&lt; BIT2;<span class="comment">//PA2 set</span></span><br><span class="line">	PA_DAT |= <span class="number">0x1</span> &lt;&lt; BIT3;<span class="comment">//PA3 set</span></span><br><span class="line"> </span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		PA_DAT &amp;= ~(<span class="number">0x1</span> &lt;&lt; BIT2);<span class="comment">//PA2 reset</span></span><br><span class="line">		delay();</span><br><span class="line">		PA_DAT |= <span class="number">0x1</span> &lt;&lt; BIT2;<span class="comment">//PA2 set</span></span><br><span class="line">		delay();</span><br><span class="line">		<span class="keyword">if</span>((PA_DAT &amp; (<span class="number">0x1</span> &lt;&lt; BIT0)) != <span class="number">0x0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			PA_DAT |= <span class="number">0x1</span> &lt;&lt; BIT3;<span class="comment">//PA3 set	</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			PA_DAT &amp;= ~(<span class="number">0x1</span> &lt;&lt; BIT3);<span class="comment">//PA3 reset</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;	 </span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">delay</span><span class="params">(<span class="keyword">void</span>)</span>		<span class="comment">// about 408ms when CPU_CLK_SRC uses OSC24M</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">__asm <span class="title">volatile</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">	<span class="string">&quot; ldr r0, =76480	\n&quot;</span> </span></span></span><br><span class="line"><span class="function"><span class="params">	<span class="string">&quot; loop:cmp r0,#0	\n&quot;</span></span></span></span><br><span class="line"><span class="function"><span class="params">	<span class="string">&quot; beq exit 			\n&quot;</span></span></span></span><br><span class="line"><span class="function"><span class="params">	<span class="string">&quot; sub r0,r0,#1 		\n&quot;</span></span></span></span><br><span class="line"><span class="function"><span class="params">	<span class="string">&quot; b loop 			\n&quot;</span></span></span></span><br><span class="line"><span class="function"><span class="params">	<span class="string">&quot;exit:nop 			\n&quot;</span></span></span></span><br><span class="line"><span class="function"><span class="params">	)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2、编写start-s文件，makefile文件"><a href="#2、编写start-s文件，makefile文件" class="headerlink" title="2、编写start.s文件，makefile文件"></a>2、编写start.s文件，makefile文件</h2><p>原本按照书上编写了start.s文件，makefile文件，但经过多次尝试后发现书上的不能照抄。在网上查资料，发现全志的芯片需要一个tools工具，能够将代码端放到指定位置，以及各种初始化。从网上下载源码后，发现其中有F1C100.s对应了书上的start.s。但并不能按照书上简单组合，还需要各种辅助文件。文件已上传在我的资源中。</p>
<img src="/posts/2989473239/4cbeacf8920f070734f393a22043e28f.png" class="" title="img">


<h2 id="3、编译后，烧写到SD卡，运行效果"><a href="#3、编译后，烧写到SD卡，运行效果" class="headerlink" title="3、编译后，烧写到SD卡，运行效果"></a>3、编译后，烧写到SD卡，运行效果</h2><img src="/posts/2989473239/5c768d84974c935a5e386ffc5c94ea0f.png" class="" title="img">

<p>这个灯在500ms闪烁。按住PA0，会使PA3点亮。</p>
<p>参考：<a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv9477324">【荔枝派Nano】F1C100S的boothead和BROM - 哔哩哔哩</a></p>
<h1 id="七、Linux初学2"><a href="#七、Linux初学2" class="headerlink" title="七、Linux初学2"></a>七、Linux初学2</h1><p>1、uboot移植、修改LED灯；2、学习uboot代码；3、阅读代码的取巧方法</p>
<h2 id="1、uboot移植"><a href="#1、uboot移植" class="headerlink" title="1、uboot移植"></a>1、uboot移植</h2><p>认知：使用uboot指令控制LED灯，在uboot&#x2F;cmd文件中找到led指令文件，在uboot&#x2F;cmd&#x2F;makefile文件中查看是否链接led指令文件，如果未链接则需要添加。原有添加方式中需要判断UBOOT_CMD_LED的值，需要在uboot&#x2F;.config中设置UBOOT_CMD_LED&#x3D;y，将led指令文件编译连接到指令中。</p>
<p>编译后，下载到demo板，打开串口调试工具，输入help指令，可以看到有led指令，在输入了的指令，可以看到介绍，对比介绍与led指令文件中一致，表示指令过程正确。</p>
<p>但现在的指令不能执行硬件动作，猜测需要修改驱动和设备树，以支持led设备。</p>
<h2 id="2、学习uboot代码"><a href="#2、学习uboot代码" class="headerlink" title="2、学习uboot代码"></a>2、学习uboot代码</h2><p>利用正确的Uboot代码，输出信息到串口调试助手：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">[20:57:46.566]收←◆</span><br><span class="line">U-Boot SPL 2018.01-05679-g013ca457fd-dirty (Feb 16 2022 - 14:45:21)</span><br><span class="line">DRAM: 64 MiB</span><br><span class="line">Trying to boot from MMC1</span><br><span class="line"></span><br><span class="line">U-Boot SPL 2018.01-05679-g013ca457fd-dirty (Feb 16 2022 - 14:45:21)</span><br><span class="line">DRAM: 64 MiB</span><br><span class="line">Trying to boot from MMC1</span><br><span class="line"></span><br><span class="line">[20:57:46.926]收←◆</span><br><span class="line">U-Boot SPL 2018.01-05679-g013ca457fd-dirty (Feb 16 2022 - 14:45:21)preloader_console_init\spl.c</span><br><span class="line">DRAM: 64 MiBsunxi_board_init\board.c</span><br><span class="line">Trying to boot from MMC1boot_from_devices\spl.c</span><br><span class="line"></span><br><span class="line">[20:57:47.096]收←◆</span><br><span class="line"></span><br><span class="line">U-Boot 2018.01-05679-g013ca457fd-dirty (Feb 16 2022 - 14:45:21 +0800) Allwinner TechnologyU_BOOT_VERSION_STRING\version.h  display_options_get_banner_priv\display_options.c</span><br><span class="line"></span><br><span class="line">CPU:   Allwinner F Series (SUNIV)print_cpuinfo\cpu_info.c</span><br><span class="line">Model: Lichee Pi Nanoshow_board_info\board_info.c</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">DRAM:  64 MiBannounce_dram_init+show_dram_config\board_f.c+display_options.c</span><br><span class="line"></span><br><span class="line">[20:57:47.628]收←◆MMC:   SUNXI SD/MMC: 0initr_mmc+mmc_initialize+print_mmc_devices\board_r.c+mmc.c+mmc_legasy.c</span><br><span class="line"></span><br><span class="line">[20:57:47.706]收←◆*** Warning - bad CRC, using default environment</span><br><span class="line"></span><br><span class="line">In:    serial@1c25000</span><br><span class="line">Out:   serial@1c25000</span><br><span class="line">Err:   serial@1c25000</span><br><span class="line">__led_init: failed requesting GPIO0!</span><br><span class="line">Net:   No ethernet found.</span><br><span class="line">starting USB...</span><br><span class="line">No controllers found</span><br><span class="line">Hit any key to stop autoboot:  2 </span><br><span class="line">[20:57:48.734]收←◆ 1 </span><br><span class="line">[20:57:49.735]收←◆ 0 </span><br><span class="line"></span><br><span class="line">[20:57:49.798]收←◆switch to partitions #0, OK</span><br><span class="line">mmc0 is current device</span><br><span class="line"></span><br><span class="line">[20:57:50.345]收←◆Scanning mmc 0:1...</span><br><span class="line"></span><br><span class="line">[20:57:50.489]收←◆reading /suniv-f1c100s-licheepi-nano.dtb</span><br><span class="line"><span class="symbol">4393 </span>bytes <span class="keyword">read</span> in <span class="number">25</span> ms (<span class="number">170.9</span> KiB/s)</span><br><span class="line"></span><br><span class="line">[20:57:50.561]收←◆starting USB...</span><br><span class="line">No controllers found</span><br><span class="line">USB is stopped. Please issue &#x27;usb start&#x27; first.</span><br><span class="line">starting USB...</span><br><span class="line">No controllers found</span><br><span class="line">No ethernet found.</span><br><span class="line">missing environment variable: pxeuuid</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: pxelinux.cfg/00000000</span><br><span class="line">No ethernet found.</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: pxelinux.cfg/0000000</span><br><span class="line">No ethernet found.</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: pxelinux.cfg/000000</span><br><span class="line">No ethernet found.</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: pxelinux.cfg/00000</span><br><span class="line">No ethernet found.</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: pxelinux.cfg/0000</span><br><span class="line">No ethernet found.</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: pxelinux.cfg/000</span><br><span class="line">No ethernet found.</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: pxelinux.cfg/00</span><br><span class="line">No ethernet found.</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: pxelinux.cfg/0</span><br><span class="line">No ethernet found.</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: pxelinux.cfg/default-arm-sunxi</span><br><span class="line">No ethernet found.</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: pxelinux.cfg/default-arm</span><br><span class="line">No ethernet found.</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: pxelinux.cfg/default</span><br><span class="line">No ethernet found.</span><br><span class="line">Config file not found</span><br><span class="line">starting USB...</span><br><span class="line">No controllers found</span><br><span class="line">No ethernet found.</span><br><span class="line">No ethernet found.</span><br><span class="line">=&gt; </span><br></pre></td></tr></table></figure>

<p>然后按照这个输出信息，一条一条找到执行位置，上面标红为函数接口，蓝色为接口所在源文件。</p>
<img src="/posts/2989473239/10cdaf8614a42f1d79e87f6a0000ba29.png" class="" title="img">

<p>屏蔽以上代码后，下面的输出信息依旧存在，表示下面的输出信息位于执行borad_init_f()之前。</p>
<img src="/posts/2989473239/0f737d68dc200a9f2776188a7cd996d1.png" class="" title="img">

<p>在指定位置添加调试信息，发现以下部分信息属于borad_init_f()内</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">U-Boot 2018.01-05679-g013ca457fd-dirty (Feb 16 2022 - 14:45:21 +0800) Allwinner Technology</span><br><span class="line"></span><br><span class="line">++++++++</span><br><span class="line"></span><br><span class="line">DRAM:  64 MiB</span><br></pre></td></tr></table></figure>
<p>这之后的信息属于board_init_r()内。</p>
<p><strong>前几天不是纠结uboot中函数在何处调用问题吗，今天找到一个笨办法了，就是把函数本身名修改成另一个，然后再编译，就会提示哪个位置有错误或警告，那就是被调用位置呐。****阅读代码的取巧方法。</strong></p>
<p>使用上述方法后终于找到了所有输出信息对应的位置。</p>
<img src="/posts/2989473239/3d5bb221c3db83abc167c2220fc285b1.png" class="" title="img">

<p>时发现了这个BUG，就是代码是灰色的，但是却是会执行的。下一步是想办法控制LED亮灭。</p>
<hr>
<h1 id="相关链接（侵删）"><a href="#相关链接（侵删）" class="headerlink" title="相关链接（侵删）"></a>相关链接（侵删）</h1><ol>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_37214729/article/details/119389552">自制F1C200S demo板（一、电路）</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_37214729/article/details/119393266">自制F1C200S demo板（二、Win上测试）</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_37214729/article/details/119460667">自制F1C200S demo板（三、Linux上测试）</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_37214729/article/details/120074618">自制F1C200S demo板（四、TF卡启动）</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_37214729/article/details/120291080">自制F1C200S demo板（五、Linux初学1）</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_37214729/article/details/121530962">自制F1C200S demo板（六、裸机寄存器点灯）</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_37214729/article/details/120330444">自制F1C200S demo板（七、Linux初学2）</a></li>
</ol>
<hr>
<center><font color=red>=================我是分割线=================</font></center>


<p><strong>欢迎到公众号来唠嗑:</strong></p>
<img src="https://pic4.zhimg.com/80/v2-eedc5dc7d30beedf4c2f1812df8e61a7_720w.jpg">

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://zml3589110.github.io">ZhaoYichen</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://zml3589110.github.io/posts/2989473239.html">https://zml3589110.github.io/posts/2989473239.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://zml3589110.github.io" target="_blank">赵逸尘个人博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%85%A8%E5%BF%97/">全志</a><a class="post-meta__tags" href="/tags/F1C200S/">F1C200S</a><a class="post-meta__tags" href="/tags/%E5%BC%80%E5%8F%91%E6%9D%BF/">开发板</a><a class="post-meta__tags" href="/tags/demo%E6%9D%BF/">demo板</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/gh/overtrue/share.js@master/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/931990122.html"><img class="prev-cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">f1c100sf1c200s 裸机程序</div></div></a></div><div class="next-post pull-right"><a href="/posts/2546212267.html"><img class="next-cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">ESP8266内置网页配置</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/246263880.html" title="F1C100SF1C200S 移植FreeRTOS全过程 GCC 版本"><img class="cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-10</div><div class="title">F1C100SF1C200S 移植FreeRTOS全过程 GCC 版本</div></div></a></div><div><a href="/posts/3233973243.html" title="全志F1C200S F1C100S 介绍"><img class="cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-15</div><div class="title">全志F1C200S F1C100S 介绍</div></div></a></div><div><a href="/posts/3905997731.html" title="全志f1c200s开发板设计"><img class="cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-05</div><div class="title">全志f1c200s开发板设计</div></div></a></div><div><a href="/posts/2357015472.html" title="学习笔记F1C100S之u-boot编译过程记录"><img class="cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-05</div><div class="title">学习笔记F1C100S之u-boot编译过程记录</div></div></a></div><div><a href="/posts/0.html" title=""><img class="cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-05</div><div class="title"></div></div></a></div><div><a href="/posts/931990122.html" title="f1c100sf1c200s 裸机程序"><img class="cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-10</div><div class="title">f1c100sf1c200s 裸机程序</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">ZhaoYichen</div><div class="author-info__description">直到这一刻微笑着说话为止，我至少留下了一公升眼泪</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">371</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">529</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">216</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/zml3589110"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/zml3589110" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:zhaominglong_life@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E7%94%B5%E8%B7%AF"><span class="toc-number">1.</span> <span class="toc-text">一、电路</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%8E%9F%E7%90%86%E5%9B%BE%EF%BC%9A%E5%A6%82%E9%9C%80PDF%E6%BA%90%E6%96%87%E4%BB%B6%E5%8F%AF%E5%88%B0%E8%B5%84%E6%BA%90%E4%B8%8B%E8%BD%BD%E3%80%82"><span class="toc-number">1.1.</span> <span class="toc-text">一、原理图：如需PDF源文件可到资源下载。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E7%94%B5%E8%B7%AF%EF%BC%9A%E5%A6%82%E9%9C%80PDF%E6%BA%90%E6%96%87%E4%BB%B6%E5%8F%AF%E5%88%B0%E8%B5%84%E6%BA%90%E4%B8%8B%E8%BD%BD%E3%80%82"><span class="toc-number">1.2.</span> <span class="toc-text">二、电路：如需PDF源文件可到资源下载。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%AE%9E%E7%89%A9"><span class="toc-number">1.3.</span> <span class="toc-text">三、实物</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Win%E4%B8%8A%E6%B5%8B%E8%AF%95"><span class="toc-number">2.</span> <span class="toc-text">二、Win上测试</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%AE%89%E8%A3%85USB%E9%A9%B1%E5%8A%A8%E3%80%82%E4%BD%BF%E7%94%A8%E7%9A%84%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%98%AFwin8%E3%80%82"><span class="toc-number">2.1.</span> <span class="toc-text">1、安装USB驱动。使用的操作系统是win8。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E4%BD%BF%E7%A1%AC%E4%BB%B6%E8%BF%9B%E5%85%A5fel%E6%A8%A1%E5%BC%8F%E3%80%82"><span class="toc-number">2.2.</span> <span class="toc-text">2、使硬件进入fel模式。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%88%B7%E6%9C%BA"><span class="toc-number">2.3.</span> <span class="toc-text">3、刷机</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C"><span class="toc-number">2.4.</span> <span class="toc-text">4、运行结果</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81Linux%E4%B8%8A%E6%B5%8B%E8%AF%95"><span class="toc-number">3.</span> <span class="toc-text">三、Linux上测试</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E8%A6%81%E4%BD%BFwindows%E8%83%BD%E6%AD%A3%E7%A1%AE%E5%AE%89%E8%A3%85%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8%E3%80%82%E6%8C%89%E7%85%A7%E4%B8%8A%E4%B8%80%E7%AB%A0%E6%96%87%E6%A1%A3%E8%BF%9B%E8%A1%8CCSDN"><span class="toc-number">3.1.</span> <span class="toc-text">1、要使windows能正确安装设备驱动。按照上一章文档进行CSDN</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%9C%A8Vbox%E9%87%8C%E6%B7%BB%E5%8A%A0%E5%A2%9E%E5%BC%BA%E5%8A%9F%E8%83%BD%E3%80%82%E6%8C%89%E7%85%A7%E6%9F%90%E5%BA%A6%E7%BB%8F%E9%AA%8C%E8%BF%9B%E8%A1%8Chttps-jingyan-baidu-com-article-22a299b5e0198a9e19376a38-html"><span class="toc-number">3.2.</span> <span class="toc-text">2、在Vbox里添加增强功能。按照某度经验进行https:&#x2F;&#x2F;jingyan.baidu.com&#x2F;article&#x2F;22a299b5e0198a9e19376a38.html</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%A2%9E%E5%BC%BA%E5%8A%9F%E8%83%BD%E5%AE%89%E8%A3%85%E5%90%8E%EF%BC%8C%E6%B7%BB%E5%8A%A0%E7%AD%9B%E9%80%89%E5%99%A8%E3%80%82%E6%88%91%E8%BF%99%E9%87%8C%E4%BD%BF%E7%94%A8%E7%9A%84%E6%89%8B%E5%8A%A8%E6%B7%BB%E5%8A%A0%E3%80%82"><span class="toc-number">3.3.</span> <span class="toc-text">3、增强功能安装后，添加筛选器。我这里使用的手动添加。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E6%89%93%E5%BC%80Linux%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%90%8E%EF%BC%8C%E8%BF%9B%E5%85%A5%E5%88%B0%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%A8%A1%E5%BC%8F%E3%80%82"><span class="toc-number">3.4.</span> <span class="toc-text">4、打开Linux虚拟机后，进入到命令行模式。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E6%98%BE%E7%A4%BA%E6%AD%A3%E5%B8%B8%EF%BC%8C%E4%BD%BF%E7%94%A8%E4%B8%B2%E5%8F%A3%E8%B0%83%E8%AF%95%E5%8A%A9%E6%89%8B%E8%83%BD%E7%9C%8B%E5%88%B0%E6%9C%89%E6%95%88%E4%BF%A1%E6%81%AF%E3%80%82%E8%A1%A8%E7%A4%BA%E6%93%8D%E4%BD%9C%E6%97%A0%E8%AF%AF%E3%80%82"><span class="toc-number">3.5.</span> <span class="toc-text">5、显示正常，使用串口调试助手能看到有效信息。表示操作无误。</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81TF%E5%8D%A1%E5%90%AF%E5%8A%A8"><span class="toc-number">4.</span> <span class="toc-text">四、TF卡启动</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81Linux%E5%88%9D%E5%AD%A61"><span class="toc-number">5.</span> <span class="toc-text">五、Linux初学1</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81u-boot"><span class="toc-number">5.1.</span> <span class="toc-text">一、u-boot</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Linux"><span class="toc-number">5.2.</span> <span class="toc-text">二、Linux</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E7%83%A7%E5%BD%95%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6%EF%BC%9A"><span class="toc-number">5.3.</span> <span class="toc-text">三、烧录可执行文件：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%98%BE%E7%A4%BA%E6%95%88%E6%9E%9C%EF%BC%9A"><span class="toc-number">5.4.</span> <span class="toc-text">四、显示效果：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E8%A3%B8%E6%9C%BA%E5%AF%84%E5%AD%98%E5%99%A8%E7%82%B9%E7%81%AF"><span class="toc-number">6.</span> <span class="toc-text">六、裸机寄存器点灯</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E4%BF%AE%E6%94%B9LED%E6%BA%90%E7%A0%81"><span class="toc-number">6.1.</span> <span class="toc-text">1、修改LED源码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E7%BC%96%E5%86%99start-s%E6%96%87%E4%BB%B6%EF%BC%8Cmakefile%E6%96%87%E4%BB%B6"><span class="toc-number">6.2.</span> <span class="toc-text">2、编写start.s文件，makefile文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E7%BC%96%E8%AF%91%E5%90%8E%EF%BC%8C%E7%83%A7%E5%86%99%E5%88%B0SD%E5%8D%A1%EF%BC%8C%E8%BF%90%E8%A1%8C%E6%95%88%E6%9E%9C"><span class="toc-number">6.3.</span> <span class="toc-text">3、编译后，烧写到SD卡，运行效果</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83%E3%80%81Linux%E5%88%9D%E5%AD%A62"><span class="toc-number">7.</span> <span class="toc-text">七、Linux初学2</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81uboot%E7%A7%BB%E6%A4%8D"><span class="toc-number">7.1.</span> <span class="toc-text">1、uboot移植</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%AD%A6%E4%B9%A0uboot%E4%BB%A3%E7%A0%81"><span class="toc-number">7.2.</span> <span class="toc-text">2、学习uboot代码</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E9%93%BE%E6%8E%A5%EF%BC%88%E4%BE%B5%E5%88%A0%EF%BC%89"><span class="toc-number">8.</span> <span class="toc-text">相关链接（侵删）</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/3233973243.html" title="全志F1C200S F1C100S 介绍"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="全志F1C200S F1C100S 介绍"/></a><div class="content"><a class="title" href="/posts/3233973243.html" title="全志F1C200S F1C100S 介绍">全志F1C200S F1C100S 介绍</a><time datetime="2025-09-15T09:52:20.000Z" title="发表于 2025-09-15 17:52:20">2025-09-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/3416408887.html" title="F1C200S使用keil5开发问题"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="F1C200S使用keil5开发问题"/></a><div class="content"><a class="title" href="/posts/3416408887.html" title="F1C200S使用keil5开发问题">F1C200S使用keil5开发问题</a><time datetime="2025-09-15T07:04:20.000Z" title="发表于 2025-09-15 15:04:20">2025-09-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/3511617639.html" title="Web Serial网页串口"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Web Serial网页串口"/></a><div class="content"><a class="title" href="/posts/3511617639.html" title="Web Serial网页串口">Web Serial网页串口</a><time datetime="2025-09-10T13:03:20.000Z" title="发表于 2025-09-10 21:03:20">2025-09-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/968082855.html" title="全志F1C100s使用记录"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="全志F1C100s使用记录"/></a><div class="content"><a class="title" href="/posts/968082855.html" title="全志F1C100s使用记录">全志F1C100s使用记录</a><time datetime="2025-09-10T11:59:20.000Z" title="发表于 2025-09-10 19:59:20">2025-09-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/2546212267.html" title="ESP8266内置网页配置"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ESP8266内置网页配置"/></a><div class="content"><a class="title" href="/posts/2546212267.html" title="ESP8266内置网页配置">ESP8266内置网页配置</a><time datetime="2025-09-10T08:09:20.000Z" title="发表于 2025-09-10 16:09:20">2025-09-10</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By ZhaoYichen</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><a href="icp连接"><img class="icp-icon" src="icp图片"><span>备案号：xxxxxx</span></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">本地搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":false},"log":false});</script></body></html>